<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Control Panel</title>
<style>
/* Lock Screen Styles */
#lock-screen {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: #1e293b;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 20px;
    box-sizing: border-box;
}
#lock-screen h2 { color: white; margin-bottom: 20px; font-family: sans-serif; text-align: center; }
#pin-input {
    width: 100%;
    max-width: 250px;
    padding: 15px;
    text-align: center;
    font-size: 24px;
    letter-spacing: 10px;
    border-radius: 10px;
    border: none;
    outline: none;
}

/* Main UI Styles */
body { font-family: sans-serif; background: #f0f2f5; padding: 15px; margin: 0; }
.card { 
    background: white; 
    max-width: 600px; 
    width: 95%; 
    margin: 0 auto 20px; 
    padding: 20px; 
    border-radius: 15px; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
    box-sizing: border-box;
}
h2 { margin-top: 0; color: #1f2937; font-size: 1.5rem; }
input, textarea, select { 
    width: 100%; 
    padding: 12px; 
    margin: 10px 0; 
    border: 1px solid #ddd; 
    border-radius: 8px; 
    box-sizing: border-box; 
    font-size: 16px;
}

/* Custom Upload Styling */
.upload-container {
    background: #f8fafc;
    border: 2px dashed #cbd5e1;
    padding: 15px;
    text-align: center;
    border-radius: 8px;
    margin: 10px 0;
    cursor: pointer;
}
#preview { 
    max-width: 100px; 
    display: none; 
    margin: 10px auto; 
    border-radius: 5px; 
}

button { 
    width: 100%; 
    padding: 12px; 
    background: #6366f1; 
    color: white; 
    border: none; 
    border-radius: 8px; 
    font-weight: bold; 
    cursor: pointer; 
    font-size: 16px;
}
button:active { opacity: 0.8; }

.item { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    border-bottom: 1px solid #eee; 
    padding: 12px 0; 
}
.item span { flex: 1; font-size: 14px; color: #4b5563; word-break: break-all; padding-right: 10px; }
.btn-group { display: flex; gap: 5px; }
.edit { background: #10b981; width: auto; padding: 6px 12px; font-size: 13px; }
.del { background: #ef4444; width: auto; padding: 6px 12px; font-size: 13px; }

/* Responsive */
@media (max-width: 480px) {
    .item { flex-direction: column; align-items: flex-start; }
    .btn-group { margin-top: 10px; width: 100%; }
    .edit, .del { flex: 1; text-align: center; }
}

#main-content { display: none; }
</style>
</head>
<body>

<div id="lock-screen">
    <h2>Enter Admin PIN</h2>
    <input type="password" id="pin-input" maxlength="4" placeholder="****" inputmode="numeric">
    <p id="error-msg" style="color: #ff4444; margin-top: 15px; display: none;">Wrong PIN!</p>
</div>

<div id="main-content">
    <div class="card">
        <h2>Add New Prompt</h2>
        
        <div class="upload-container" onclick="document.getElementById('file-input').click()">
            <span id="upload-text">ðŸ“¸ Click to Upload Image</span>
            <input type="file" id="file-input" accept="image/*" style="display:none" onchange="handleImage(this)">
            <img id="preview">
        </div>

        <textarea id="txt" rows="4" placeholder="Prompt Text..."></textarea>
        <select id="cat"></select>
        <button onclick="add()">Publish Prompt</button>
    </div>

    <div class="card">
        <h2>Manage Prompts</h2>
        <div id="list"></div>
        <br>
        <button style="background:#1e293b" onclick="exportData()">Download data.json</button>
    </div>
</div>

<script>
let currentImageData = ""; // Image data store karne ke liye

// PIN Logic
const correctPin = "6655";
const pinInput = document.getElementById('pin-input');
pinInput.addEventListener('input', () => {
    if (pinInput.value === correctPin) {
        document.getElementById('lock-screen').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
    } else if (pinInput.value.length === 4) {
        document.getElementById('error-msg').style.display = 'block';
        pinInput.value = '';
        setTimeout(() => { document.getElementById('error-msg').style.display = 'none'; }, 2000);
    }
});

// Image Handling (Gallery se photo lena)
function handleImage(input) {
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            currentImageData = e.target.result;
            const preview = document.getElementById('preview');
            preview.src = e.target.result;
            preview.style.display = 'block';
            document.getElementById('upload-text').innerText = "Image Selected âœ…";
        }
        reader.readAsDataURL(input.files[0]);
    }
}

const categories = ["Love Prompt","Couple Prompt","Super Hero Prompt","iPhone Edit Prompt","Simple Image Prompt","Sad Image Prompt","Funny Image Prompt","Kids Prompt","Girls Prompt","Boys Prompt","Emotional Prompt","Attitude Prompt","Alone Prompt","Travel Prompt","Nature Prompt","Village Prompt","City Prompt","Cinematic Prompt","Model Prompt","Anime Prompt","Cartoon Prompt","Logo Prompt","Business Prompt","Product Prompt","Advertisement Prompt","Thumbnail Prompt","Wedding Prompt","Birthday Prompt","Festival Prompt","Fashion Prompt","Makeup Prompt","Car Prompt","Bike Prompt","Animal Prompt","Tiger Prompt","Lion Prompt","Birds Prompt","Landscape Prompt","3D Prompt","AI Tools Prompt","Editing Prompt","Professional Prompt","Motivation Prompt","Quotes Prompt","Sad Quotes Prompt","Romantic Quotes Prompt","Islamic Prompt","Poetry Prompt","Fantasy Prompt","Action Prompt","Movie Scene Prompt","Gaming Prompt","Horror Prompt","Mystery Prompt"];

let list = JSON.parse(localStorage.getItem('adminDB') || '[]');
const select = document.getElementById('cat');
categories.forEach(c => select.innerHTML += `<option value="${c}">${c}</option>`);

function render() {
    document.getElementById('list').innerHTML = list.map((p,i)=>`
    <div class="item">
        <span><b>${p.category}</b>: ${p.text.substring(0,30)}...</span>
        <div class="btn-group">
            <button class="edit" onclick="edit(${i})">Edit</button>
            <button class="del" onclick="remove(${i})">Delete</button>
        </div>
    </div>`).join('');
}

function add() {
    const txt = document.getElementById('txt').value.trim();
    if(txt == "") return alert("Please enter prompt text");
    
    const p = {
        id: Date.now(),
        image: currentImageData, // Link ki jagah ab image data save hoga
        text: txt,
        category: document.getElementById('cat').value
    };
    list.push(p);
    save();
    
    // Reset fields
    currentImageData = "";
    document.getElementById('preview').style.display = 'none';
    document.getElementById('upload-text').innerText = "ðŸ“¸ Click to Upload Image";
    document.getElementById('txt').value = '';
}

function remove(i){ 
    if(confirm("Are you sure?")) { list.splice(i,1); save(); }
}

function edit(i){
    const p = list[i];
    currentImageData = p.image;
    if(p.image) {
        document.getElementById('preview').src = p.image;
        document.getElementById('preview').style.display = 'block';
    }
    document.getElementById('txt').value = p.text;
    document.getElementById('cat').value = p.category;
    list.splice(i,1);
    render();
    window.scrollTo(0,0);
}

function save(){ 
    localStorage.setItem('adminDB',JSON.stringify(list));
    render();
}

function exportData(){
    const data = { prompts:list, categories:categories };
    const blob = new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download="data.json";
    a.click();
}

render();
</script>

</body>
</html>
